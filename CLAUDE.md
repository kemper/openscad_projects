# OpenSCAD Projects

## Project Structure

- `src/` — OpenSCAD `.scad` source files, organized in subdirectories
- `dist/` — Compiled `.stl` files (generated by `make build`), mirrors `src/` structure
- `previews/` — Rendered PNG previews (generated by `make previews`), mirrors `src/` structure
- `tmp/` — Temporary files for quick one-off previews
- `.venv/` — Python virtual environment managed by `uv` (contains lib3mf)

## Build Commands

```bash
# Build all .scad files to .stl
make build

# Build all files in one subdirectory
make build dir=shelf

# Build a single file to .stl
make build_one file=src/shelf/shelf.scad

# Generate PNG previews for all files (or one subdirectory)
make previews
make previews dir=shelf

# Generate a single PNG preview to tmp/ for quick verification
make preview file=src/shelf/shelf.scad
```

## Verifying OpenSCAD Output

After writing or modifying a `.scad` file, always generate a PNG preview and visually inspect it before considering the work done:

```bash
make preview file=src/your_subdir/your_file.scad
```

This renders `tmp/preview.png` via OpenSCAD (STL) + F3D (PNG). Claude can read this directly to visually verify the shape.

## OpenSCAD Conventions

- All configurable parameters should be declared at the top of the file with sensible defaults
- Use millimeters as the unit of measurement
- Use `$fn` for controlling curve smoothness (higher = smoother, slower)
- Prefer `minkowski()` or `offset()` for rounding edges over manual math when appropriate

## Python Environment

This project uses `uv` for Python package management. The virtual environment is at `.venv/`.

```bash
# Install dependencies
uv pip install lib3mf

# Run Python scripts via the venv
.venv/bin/python script.py

# Or in Makefile targets, use $(PYTHON) which points to .venv/bin/python
```

## Installed Tools

- **OpenSCAD**: Version 2026.02.19 (snapshot) — uses Manifold backend by default for fast rendering
- **F3D**: Version 3.4.1 — used for high-quality PNG preview rendering from STL files
- **uv**: Version 0.10.5 — Python package manager
- **lib3mf**: Version 2.5.0 (in .venv) — library for creating/manipulating 3MF files with multi-color support
